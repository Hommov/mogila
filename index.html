<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Калькулятор туризма — Civilization V</title>
  <style>
    :root {
      --bg: #0b1020;
      --card: #131a33;
      --accent: #7aa2ff;
      --text: #e7eaf6;
      --muted: #aab2d5;
      --border: #2a355f;
      --good: #65d09b;
    }
    * { box-sizing: border-box; }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans';
      background: radial-gradient(1200px 800px at 10% 0%, #0d1430, var(--bg));
      color: var(--text);
      margin: 0; padding: 24px;
    }
    h1 { font-size: 1.6rem; margin-bottom: 16px; }
    .wrap { max-width: 980px; margin: 0 auto; display: grid; gap: 16px; }
    .grid { display: grid; grid-template-columns: 1fr; gap: 16px; }
    @media (min-width: 840px) { .grid { grid-template-columns: 1.2fr 1fr; } }
    .card { background: var(--card); border: 1px solid var(--border); border-radius: 16px; padding: 16px 18px; }
    .field { display: grid; grid-template-columns: 1fr auto; gap: 8px; align-items: center; margin: 8px 0; }
    .checks { display: grid; gap: 10px; }
    .check { display: grid; grid-template-columns: 24px 1fr; gap: 12px; align-items: start; padding: 10px 12px; border-radius: 12px; border: 1px dashed var(--border); }
    .out .row { display: flex; justify-content: space-between; border-bottom: 1px dashed var(--border); padding: 6px 0; }
    button { padding: 10px 14px; border-radius: 12px; border: 1px solid var(--border); background: #10183a; color: var(--text); cursor: pointer; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Калькулятор туризма — Civilization V</h1>
    <div class="grid">
      <section class="card">
        <h2>Параметры</h2>
        <div class="checks">
          <div class="check"><input type="checkbox" id="towerPolicy"><label for="towerPolicy">1) Радиовышка + политика</label></div>
          <div class="check"><input type="checkbox" id="internet"><label for="internet">2) Интернет</label></div>
          <div class="check"><input type="checkbox" id="hotel"><label for="hotel">3) Отель</label></div>
          <div class="check"><input type="checkbox" id="airport"><label for="airport">4) Аэропорт</label></div>
          <div class="check"><input type="checkbox" id="infoCenter"><label for="infoCenter">5) Инфоцентр</label></div>
          <div class="check"><input type="checkbox" id="masterpiecePolicy"><label for="masterpiecePolicy">6) Политика на шедевры</label></div>
        </div>
        <div class="field"><label for="Y">Y — чемоданы от тематического бонуса</label><input id="Y" type="number" value="0"></div>
        <div class="field"><label for="Z">Z — шедевры в столице</label><input id="Z" type="number" value="0"></div>
        <div class="field"><label for="L">L — культура от клеток</label><input id="L" type="number" value="0"></div>
        <div class="field"><label for="W">W — культура от чудес</label><input id="W" type="number" value="0"></div>
        <button id="reset">Сброс</button>
      </section>
      <section class="card">
        <h2>Результаты</h2>
        <div class="out">
          <div class="row"><span>S</span><span id="S">0</span></div>
          <div class="row"><span>X = Z·S + L + W</span><span id="X">0</span></div>
          <div class="row"><span>N</span><span id="N">0</span></div>
          <div class="row"><span>T</span><span id="T">0</span></div>
        </div>
      </section>
    </div>
  </div>
<script>
const $ = id => document.getElementById(id);
const inputs = ['Y','Z','L','W'].map($);
const checks = ['towerPolicy','internet','hotel','airport','infoCenter','masterpiecePolicy'].map($);
const SOut=$('S'),XOut=$('X'),NOut=$('N'),TOut=$('T');

function parseNum(v){return parseFloat((v+'').replace(',', '.'))||0;}
function fmt(n){return (Math.round(n*100)/100).toLocaleString('ru-RU',{maximumFractionDigits:2});}

function recompute(){
  const Y=parseNum($('Y').value),Z=parseNum($('Z').value),L=parseNum($('L').value),W=parseNum($('W').value);
  const hasTower=$('towerPolicy').checked;
  const hasInternet=$('internet').checked;
  const hasHotel=$('hotel').checked;
  const hasAirport=$('airport').checked;
  const hasInfo=$('infoCenter').checked;
  const hasMP=$('masterpiecePolicy').checked;
  const S=hasMP?6:4;
  const X=Z*S+L+W;
  let N=Y+Z*S; // теперь Z*S входит напрямую
  let extra=0;
  if(hasHotel)extra+=0.5*X;
  if(hasAirport)extra+=0.5*X;
  if(hasInfo)extra+=1*X;
  if(extra>0)N+=extra; // X добавляем только если есть хотя бы один из пунктов 3–5
  let T=N;
  if(hasTower)T+=0.33*N;
  if(hasInternet)T+=N;
  SOut.textContent=fmt(S);
  XOut.textContent=fmt(X);
  NOut.textContent=fmt(N);
  TOut.textContent=fmt(T);
}

inputs.concat(checks).forEach(e=>{e.addEventListener('input',recompute);e.addEventListener('change',recompute);});
$('reset').addEventListener('click',()=>{inputs.forEach(i=>i.value='0');checks.forEach(c=>c.checked=false);recompute();});
recompute();
</script>
</body>
</html>
